## 问题

请实现一个函数用来判断字符串是否表示<b>数值（包括整数和小数）。

<b>数值</b>（按顺序）可以分成以下几个部分：

1. 若干空格
2. 一个 小数 或者 整数
3. （可选）一个 'e' 或 'E' ，后面跟着一个 整数
4. 若干空格

<b>小数</b>（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（'+' 或 '-'）
2. 下述格式之一：
   1. 至少一位数字，后面跟着一个点 '.'
   2. 至少一位数字，后面跟着一个点 '.' ，后面再跟着至少一位数字
   3. 一个点 '.' ，后面跟着至少一位数字

<b>整数</b>（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（'+' 或 '-'）
2.  至少一位数字

部分<b>数值</b>列举如下：

+ ["+100", "5e2", "-123", "3.1416", "-1E-16", "0123"]

部分<b>非数值</b>列举如下：

+ ["12e", "1a3.14", "1.2.3", "+-5", "12e+5.4"]



## 示例

```
输入：s = "."
输出：false

输入：s = "    .1  "
输出：true
```



## 代码

#### 状态定义

按照字符串从左到右的顺序，定义一下9种状态：

1. 开始的空格
2. 幂符号前的正负号
3. 小数点前的数字
4. 小数点、小数点后的数字
5. 当小数点为空格时，小数点、小数点后的数字
6. 幂符号
7. 幂符号后的正负号
8. 幂符号后的数字
9. 结尾的空格

#### 结束状态

合法的有2， 3， 7， 8

![6f41d7e46fd0344c013980e3f46429dd7a7311bb4292783a482466a90f15747b-Picture1](D:\blog\img\6f41d7e46fd0344c013980e3f46429dd7a7311bb4292783a482466a90f15747b-Picture1.png)

#### 算法流程

1. <b>初始化</b>
   1. <b>状态转移表</b> states:设 states[i], 其中 i 为所处状态， states[i] 使用哈希表存储可转移至的状态。键值对(key, value)含义： 若输入key，则可从状态i转移至value。
   2. <b>当前状态</b> p：起始状态初始化为 p = 0
2. <b>状态转移循环</b>：遍历字符串 s是的每个字符 c
   1. <b>记录字符类型</b> t : 
      + 当 c 为正负号，执行  ```t = 's'```
      + 当 c 为数字，执行  ```t = 'd'```
      + 当 c 为 e, E，执行  ```t = 'e'```
      + 当 c 为<b> .</b>，空格，执行  ```t = 'c'```  (即字符本身表示字符类型)
      + 否则，执行  ```t = '?'``` ,代表不属于判断范围的非法字符，后续直接返回 false
   2. <b>终止条件</b>：若 t 不在哈希表 states[p] 中，说明无法转移至下一状态，因此直接返回False
   3. <b>状态转移</b>：状态 p 转移至 states[p] [ t]
3. <b>返回值</b>：跳出循环后，若状态 ```p∈2, 3, 7, 8```,说明结尾合法，返回 True

```java
class Solution {
    public boolean isNumber(String s) {
        Map[] states = {
            new HashMap<>() {{ put(' ', 0); put('s', 1); put('d', 2); put('.', 4); }}, // 0.
            new HashMap<>() {{ put('d', 2); put('.', 4); }},                           // 1.
            new HashMap<>() {{ put('d', 2); put('.', 3); put('e', 5); put(' ', 8); }}, // 2.
            new HashMap<>() {{ put('d', 3); put('e', 5); put(' ', 8); }},              // 3.
            new HashMap<>() {{ put('d', 3); }},                                        // 4.
            new HashMap<>() {{ put('s', 6); put('d', 7); }},                           // 5.
            new HashMap<>() {{ put('d', 7); }},                                        // 6.
            new HashMap<>() {{ put('d', 7); put(' ', 8); }},                           // 7.
            new HashMap<>() {{ put(' ', 8); }}                                         // 8.
        };
        int p = 0;
        char t;
        for(char c : s.toCharArray()) {
            if(c >= '0' && c <= '9') t = 'd';
            else if(c == '+' || c == '-') t = 's';
            else if(c == 'e' || c == 'E') t = 'e';
            else if(c == '.' || c == ' ') t = c;
            else t = '?';
            if(!states[p].containsKey(t)) return false;
            p = (int)states[p].get(t);
        }
        return p == 2 || p == 3 || p == 7 || p == 8;
    }
}
```



